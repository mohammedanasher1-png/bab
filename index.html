<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>باب | سوق إلكتروني</title>

<style>
:root{
  --black:#111;
  --gray:#f2f2f2;
  --pink:#e91e63;
  --white:#fff;
}

*{box-sizing:border-box;font-family:Cairo,Arial;margin:0;padding:0}

body{background:var(--gray)}

header{
  background:white;
  padding:15px 25px;
  display:flex;
  justify-content:space-between;
  box-shadow:0 2px 10px rgba(0,0,0,.05);
}

.logo{font-size:24px;font-weight:bold}
.logo span{color:var(--pink)}

nav button{
  background:none;
  border:none;
  margin:0 5px;
  cursor:pointer;
  font-weight:bold;
}

.container{max-width:1100px;margin:auto;padding:25px}

section{display:none}
section.active{display:block}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
}

.card{
  background:white;
  padding:15px;
  border-radius:12px;
  box-shadow:0 5px 15px rgba(0,0,0,.05);
}

.card img{width:100%;border-radius:10px}

.price{color:var(--pink);font-weight:bold;margin:8px 0}

button.action{
  background:var(--black);
  color:white;
  border:none;
  padding:8px 12px;
  border-radius:8px;
  cursor:pointer;
}

.cart-item{
  background:white;
  padding:10px;
  border-radius:10px;
  margin:10px 0;
  display:flex;
  justify-content:space-between;
}

.admin-box{
  background:#1c1c1c;
  color:white;
  padding:20px;
  border-radius:12px;
}

input{width:100%;padding:8px;margin:8px 0;border-radius:6px;border:1px solid #ccc}

</style>
</head>

<body>

<header>
<div class="logo">باب<span>.</span></div>
<nav>
<button onclick="showPage('home')">الرئيسية</button>
<button onclick="showPage('cartPage')">السلة</button>
<button onclick="showPage('adminLogin')">الإدارة</button>
</nav>
</header>

<div class="container">

<!-- HOME -->
<section id="home" class="active">
<h2>المنتجات</h2>
<div id="products" class="grid"></div>
</section>

<!-- CART -->
<section id="cartPage">
<h2>السلة</h2>
<div id="cart"></div>
<button class="action" onclick="clearCart()">حذف السلة</button>
<button class="action" onclick="checkout()">إتمام الطلب</button>
</section>

<!-- ADMIN LOGIN -->
<section id="adminLogin">
<h2>دخول الإدارة</h2>
<input id="user" placeholder="اسم المستخدم">
<input id="pass" type="password" placeholder="كلمة المرور">
<button class="action" onclick="login()">دخول</button>
<p id="error" style="color:red"></p>
</section>

<!-- ADMIN PANEL -->
<section id="adminPanel">
<div class="admin-box">
<h3>إضافة منتج</h3>

<input id="pname" placeholder="اسم المنتج">
<input id="pprice" placeholder="السعر">
<input type="file" id="pimage">

<button class="action" onclick="addProduct()">إضافة</button>

</div>
</section>

</div>

<script>

/* ---------- NAVIGATION ---------- */
function showPage(id){
  document.querySelectorAll("section")
  .forEach(s=>s.classList.remove("active"));

  document.getElementById(id).classList.add("active");
}

/* ---------- PRODUCTS ---------- */

let products=[
 {name:"سماعات",price:25,img:"https://via.placeholder.com/300"},
 {name:"ساعة ذكية",price:40,img:"https://via.placeholder.com/300"}
];

function renderProducts(){
  const container=document.getElementById("products");
  container.innerHTML="";

  products.forEach((p,i)=>{
    container.innerHTML+=`
      <div class="card">
        <img src="${p.img}">
        <h3>${p.name}</h3>
        <div class="price">${p.price}$</div>
        <button class="action" onclick="addToCart(${i})">
        أضف للسلة
        </button>
      </div>
    `;
  });
}

/* ---------- CART ---------- */

let cart=[];

function addToCart(i){
  cart.push(products[i]);
  renderCart();
}

function renderCart(){
  const c=document.getElementById("cart");
  c.innerHTML="";

  cart.forEach((item,index)=>{
    c.innerHTML+=`
      <div class="cart-item">
        <span>${item.name} - ${item.price}$</span>
        <button onclick="removeItem(${index})">حذف</button>
      </div>
    `;
  });
}

function removeItem(i){
  cart.splice(i,1);
  renderCart();
}

function clearCart(){
  cart=[];
  renderCart();
}

function checkout(){
  alert("تم إرسال الطلب — سيتم التواصل معك");
}

/* ---------- ADMIN LOGIN ---------- */

function login(){
  const u=document.getElementById("user").value;
  const p=document.getElementById("pass").value;

  if(u==="admin" && p==="1234"){
    showPage("adminPanel");
  }else{
    document.getElementById("error").innerText="بيانات خاطئة";
  }
}

/* ---------- ADD PRODUCT (UPLOAD IMAGE LOCAL) ---------- */

function addProduct(){

  const name=document.getElementById("pname").value;
  const price=document.getElementById("pprice").value;
  const file=document.getElementById("pimage").files[0];

  if(!file) return alert("اختر صورة");

  const reader=new FileReader();

  reader.onload=function(e){

    products.push({
      name:name,
      price:price,
      img:e.target.result
    });

    renderProducts();
    alert("تم إضافة المنتج");
    showPage("home");
  };

  reader.readAsDataURL(file);
}

renderProducts();

</script>

</body>
</html>
